/*! range-picker - v0.0.1-dev - 2016-03-13 */
!function(a){"use strict";function b(a){return"undefined"==typeof a}function c(a,b){return a.replace(g,function(a,c){return b[c]})}function d(a,c){if(b(c.startValue)||b(c.endValue))throw new Error("startValue and endValue is need");if(b(c.translateSelectLabel))throw new Error(" RangePicker: translateSelectLabel is need");this.__init(a,c)}function e(a){this.__init(a)}function f(a){this.__init(a)}var g=/<%=\s*(\w+)\s*%>/g;d.prototype={constructor:d,__defaultOptions:{type:"single",getSelectValue:a.loop},__template:"<div class='range-picker-wrapper'><div class='range-picker'><span class='label range-label'><%= startValue %></span><span class='label range-label end-label'><%= endValue %></span></div></div>",__init:function(b,c){this.__options=a.extend({},this.__defaultOptions,c),this.__$containerElement=b,this.__render(),this.__$datepickerElement=this.__$containerElement.find(".range-picker"),this.__addWidget()},__render:function(){var a={startValue:this.__options.startValue,endValue:this.__options.endValue},b=c(this.__template,a);this.__$containerElement.html(b)},__addWidget:function(){this.__rightSelectLabel=new e({positionChange:a.proxy(this.__handleLabelPositionChange,this),totalWidth:this.__$datepickerElement.width()}),this.__processBar=new f,this.__$datepickerElement.append(this.__rightSelectLabel.getJQueryElement()),this.__$datepickerElement.append(this.__processBar.getJQueryElement()),this.__setWidgetInitialValue()},__setWidgetInitialValue:function(){var a=this.__$datepickerElement.width()/2;this.__updateView(a),this.__rightSelectLabel.updatePosition({left:a-this.__rightSelectLabel.getJQueryElement().width()/2})},__handleLabelPositionChange:function(a){this.__updateView(a.left)},__updateView:function(a){this.__processBar.updatePosition({width:a});var b=this.__options.translateSelectLabel(a,this.__$datepickerElement.width());this.__rightSelectLabel.render(b)},getSelectValue:function(){var a=this.__rightSelectLabel.getArrowPosition();return{endValue:a.left,totalWidth:this.__$datepickerElement.width()}}},e.prototype={constructor:e,__defaultOptions:{positionChange:a.loop,initValue:"",totalWidth:0},__template:"<span class='label select-label'></span>",__init:function(b){this.__options=a.extend({},this.__defaultOptions,b),this.__$element=a(this.__template),this.render(this.__options.initValue),this.__bindDragEventHandler()},render:function(a){this.__$element.text(a)},__bindDragEventHandler:function(){var a=this;this.__$element.on("mousedown",function(a){this.__rangepicker={isMouseDown:!0,mouseStartX:a.clientX,previousMoveDistance:0}}).on("mouseup",function(){this.__rangepicker=null}).on("mousemove",function(b){this.__rangepicker&&this.__rangepicker.isMouseDown&&a.__handleDragEvent(b.clientX,this.__rangepicker)}).on("mouseout",function(){this.__rangepicker=null})},__handleDragEvent:function(a,b){var c=a-b.mouseStartX-b.previousMoveDistance;b.previousMoveDistance=a-b.mouseStartX;var d=this.__calculatePosition(c);this.updatePosition({left:d}),this.__options.positionChange(this.getArrowPosition(),this.__$element)},__calculatePosition:function(a){var b=this.__$element.position().left,c=this.__$element.width()/2,d=b+a;return d+c>this.__options.totalWidth?d=this.__options.totalWidth-c:0>d+c&&(d=-c),d},updatePosition:function(a){for(var b in a)a.hasOwnProperty(b)&&this.__$element.css(b,a[b]+"px")},getJQueryElement:function(){return this.__$element},getArrowPosition:function(){var a=this.__$element.position(),b={left:a.left+this.__$element.width()/2,top:0};return b}},f.prototype={constructor:f,__template:"<span class='process'></span>",__init:function(){this.__$element=a(this.__template)},updatePosition:function(a){for(var b in a)a.hasOwnProperty(b)&&this.__$element.css(b,a[b]+"px")},getJQueryElement:function(){return this.__$element}},a.fn.rangepicker=function(a){return new d(this,a)}}($);
//# sourceMappingURL=range_picker.min.js.map